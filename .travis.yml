dist: trusty
sudo: false
services:
- docker
language: go
go:
- 1.9
branches:
  except:
  - "/^\\d+\\.\\d+\\.\\d+-.*\\d+$/"
  - "/\\+travis\\.[0-9]+$/"
env:
  global:
  - ATOMIST_TEAM=T29E48P34
  - secure: rjLSIQW07Z8wRK5HVQndgzreaimEB4lp+Nra7gCdvUkMcZGrNrnGYCBzsSCuC4C+YY9YsDWNtmSjCvy4k3NRf7qfdtnH7kKtwXr1d8wZNiIISW29td1O3hZnXTrsVnW+IYvlq3Ddkgs+FbgEuCQEiPiavpM+ucq6uiO2MKmoAARMPO//sik2JTmPOEQFFBBF+p7p5G3PICTl1Wy1eRKvgxLMEx4Et8nnqlYAeOys+66QtBMaX/50Wn7N5ALYCu3u2k3vuZdyvu91cNjvEpJyWq6gLfC8p/7D+YpjWYZW7BY9IbXDQU8RNNnD9y0chHTB1kvwo5HBGKgNC9ETqSJnMWpBwa8DnLSM2kINI9Ygo6rJyhbxdYBU60NyXPgb4FRY+m/GeqE2esz0C9bNvKCaxKV44t1UEDwYfOJH/V/cC3oxGqd3V3Pg4IorKftfgDMLFaEp8LmAIkcnOjKt0G5f3x/uHw9QH9SNXPemRFOyqBRUR7Ckicuokm5zuNUUGN6FfW9CZ8oWJVKuxtJy5zgbOZi7/oUNfFzHUDhqrGz25RLUQ6GPCWNKFGzu9pwt6WXcLEOUhZoIdjOV0wTq03tDOiCx27IFEMJrLhay4DA5NtkTQTxiEANBZEyIxneaKEXPsaaWUtawZVDtodIa7xbBw9Ct6t3PgoX0ZJGi9oMF8c4=
  - DOCKER_USER=atomistbot
  - secure: HFPbNHYpJxZVV6y7lTabB58gOWkh6zcSh2ICwBzi+2KgsZakRLX1UPSXHoFmr9VBNi4D00zi6zwtkboiSwd9fDVZDfUIj9UgvJ2+Txa1NNV65952ZEvputzCqu77UdK0lPqx9qELU3Vckn/Z6Ur5KxHqjp83+9heTUTe3Obln0OuDL8EeHFevEZJ1sBvhI4lDNMCajlxQfI2+5okzzZ9bkmZqX7YDorX54qDGBx98apdEmJtx2BsVYdc/jX0B9t07Ybrjd0lcVXIatmxlD7BCMWBClwllyxgE+Xjqy1miJp3HfnYXuO83UzzcLmdmxBG87iiM0vUPWV7wU7gvtqrh/aMBzEtHpgii/TOM7xhEG/ThIsj1TvyTFin82CHwywbkrMSsjnZ4T9a2B63XLxeoMjy88H6Qd1+IdvoO7Md/wLelSXsaI7N6BTHeIcJOwFr2GI2w/P+6LNlo30VvWI9F1nEOWv/j9X2R8NLzUCdvP/Scl2h8tF7r5+4V2sdIX/D6Ju8ER1rBwLmtGMuZ7HzDJLfJ8JdmGWAE82Jf7kzlKhxlQwkYuPUmdqObwAYgpIXxIT4GBdvxJLTqXYCYxr1osN8ippnZYfZok8qxQgiDmYrS//o42TTrj2w2J6E53h0tro9sWP08gcFEr+aaE/s6cT3JcOZ5+Ot4F0cLCKdPK4=
script: bash travis-build.bash
notifications:
  email: false
  webhooks:
    urls:
    - https://webhook.atomist.com/atomist/travis/teams/T29E48P34
    on_success: always
    on_failure: always
    on_start: always
    on_cancel: always
    on_error: always
deploy:
- provider: releases
  api_key: "$GITHUB_TOKEN"
  on:
    tags: true
    condition: "$TRAVIS_TAG =~ ^[0-9]+\\.[0-9]+\\.[0-9]+(-(m|rc)\\.[0-9]+)?$"
